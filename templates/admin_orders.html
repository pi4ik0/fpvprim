<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>–ê–¥–º—ñ–Ω-–ø–∞–Ω–µ–ª—å ‚Äî FPV Shop</title>
  <style>
    :root { --bg:#041225; --card:rgba(255, 255, 255, 0.04); --accent:#06b6d4; --muted:#94a3b8; --danger:#ef4444; --gold:#f59e0b; }
    body { margin:0; font-family: Inter, sans-serif; background: #02101a; color: #e6eef6; padding: 20px; }
    .container { max-width: 1200px; margin: 0 auto; }
    .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 20px; }
    
    /* –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–∞ –≥—Ä–∞—Ñ—ñ–∫–∏ */
    .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 40px; }
    .graph-card { background: var(--card); border: 1px solid rgba(255,255,255,0.08); border-radius: 18px; padding: 20px; text-align: center; }
    .graph-card h3 { margin: 0 0 15px; font-size: 14px; color: var(--muted); text-transform: uppercase; letter-spacing: 1px; }
    .graph-card img { width: 100%; height: auto; border-radius: 10px; }

    /* –ö–∞—Ä—Ç–∫–∏ –∑–∞–º–æ–≤–ª–µ–Ω—å */
    .order-card { background: var(--card); border: 1px solid rgba(255,255,255,0.08); border-radius: 18px; padding: 25px; margin-bottom: 25px; position: relative; }
    .order-header { display: flex; justify-content: space-between; margin-bottom: 20px; }
    .status-badge { background: rgba(6,182,212,0.1); color: var(--accent); padding: 5px 15px; border-radius: 30px; font-size: 12px; font-weight: 700; }
    
    .order-grid { display: grid; grid-template-columns: 1fr 1.2fr; gap: 30px; }
    .info-group p { margin: 10px 0; font-size: 15px; color: #cbd5e1; }
    .info-group b { color: var(--muted); margin-right: 5px; font-weight: 500; }

    .items-container { background: rgba(0,0,0,0.25); border-radius: 12px; padding: 20px; }
    .item-row { padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
    .item-row:last-child { border: none; }
    .item-main { display: flex; justify-content: space-between; font-weight: 600; }
    .item-params { font-size: 12px; color: var(--gold); margin-top: 5px; font-family: monospace; }
    
    .total-price { text-align: right; margin-top: 20px; font-size: 24px; font-weight: 800; color: var(--accent); }
    .btn-del { margin-top: 20px; display: inline-block; color: var(--danger); text-decoration: none; border: 1px solid var(--danger); padding: 10px 20px; border-radius: 10px; font-size: 13px; font-weight: 700; transition: 0.3s; }
    .btn-del:hover { background: var(--danger); color: white; }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
        <h1>üìä –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω—å</h1>
        <a href="/" style="color:var(--accent); text-decoration:none; font-weight:bold;">–ù–∞ –≥–æ–ª–æ–≤–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É</a>
    </div>

    <div class="stats-grid">
        <div class="graph-card">
            <h3>üìà –î–∏–Ω–∞–º—ñ–∫–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ –∑–∞–º–æ–≤–ª–µ–Ω—å</h3>
            {% if plot_url_count %}
                <img src="data:image/png;base64,{{ plot_url_count }}">
            {% else %}
                <div style="padding:50px; color:var(--muted)">–î–∞–Ω—ñ –¥–ª—è –≥—Ä–∞—Ñ—ñ–∫–∞ –∑–±–∏—Ä–∞—é—Ç—å—Å—è...</div>
            {% endif %}
        </div>
        <div class="graph-card">
            <h3>üí∞ –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –≤–∏—Ä—É—á–∫–∏</h3>
            {% if plot_url_sum %}
                <img src="data:image/png;base64,{{ plot_url_sum }}">
            {% else %}
                <div style="padding:50px; color:var(--muted)">–î–∞–Ω—ñ –¥–ª—è –≥—Ä–∞—Ñ—ñ–∫–∞ –∑–±–∏—Ä–∞—é—Ç—å—Å—è...</div>
            {% endif %}
        </div>
    </div>

    {% for order in orders %}
    <div class="order-card">
        <div class="order-header">
            <div>
                <span style="font-size:20px; font-weight:800; color:var(--accent)">#{{ order.id }}</span>
                <span class="status-badge" style="margin-left:15px;">{{ order.status }}</span>
            </div>
            <span style="color:var(--muted)">üìÖ {{ order.created_at }}</span>
        </div>

        <div class="order-grid">
            <div class="info-group">
                <p><b>üë§ –ö–ª—ñ—î–Ω—Ç:</b> {{ order.name }}</p>
                <p><b>üìû –¢–µ–ª–µ—Ñ–æ–Ω:</b> {{ order.phone }}</p>
                <p><b>üìç –ê–¥—Ä–µ—Å–∞:</b> {{ order.address }}</p>
                <p><b>üöö –ú–µ—Ç–æ–¥:</b> {{ order.delivery_method }}</p>
                <p><b>üí≥ –û–ø–ª–∞—Ç–∞:</b> {{ order.payment_method }}</p>
                {% if order.comment %}
                    <p style="font-style:italic; opacity:0.8;"><b>üí¨ –ö–æ–º–µ–Ω—Ç:</b> "{{ order.comment }}"</p>
                {% endif %}
                <a href="/admin/delete_order/{{ order.id }}" class="btn-del" onclick="return confirm('–í–∏–¥–∞–ª–∏—Ç–∏?')">‚ùå –í–∏–¥–∞–ª–∏—Ç–∏</a>
            </div>

            <div class="items-container">
                <h4 style="margin:0 0 15px; font-size:12px; color:var(--muted); text-transform:uppercase;">–°–∫–ª–∞–¥ –ø–∞–∫—É–Ω–∫—É:</h4>
                {% for item in order.items_list %}
                <div class="item-row">
                    <div class="item-main">
                        <span>{{ item.name }} x{{ item.qty }}</span>
                        <span>{{ item.subtotal }} –≥—Ä–Ω</span>
                    </div>
                    <div class="item-params">
                        –ú–û–î–ï–õ–¨: {{ item.model }} | –ö–û–õ–Ü–†: {{ item.color }}
                    </div>
                </div>
                {% endfor %}
                <div class="total-price">{{ order.total_price }} –≥—Ä–Ω</div>
            </div>
        </div>
    </div>
    {% endfor %}
  </div>
</body>
</html>